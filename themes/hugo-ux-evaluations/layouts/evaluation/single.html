{{ define "main" }}
    <section data-noprocess data-shortcode-slide
        data-transition="zoom"
        data-template="blue"
        id="start">
        <div class="slide-intro">
            <h2>UX Heutristics Report</h2>
            <h2>– {{ .Title }}</h2>

            <a href="{{ .Params.website }}">{{ .Params.website }}</a>

            <div class="auditor">
                <div>
                    {{ .Params.auditor }}
                </div>
                <div>
                    {{ .Date.Format "January, 2006" }}
                </div>
            </div>
        </div>
    </section>

    <section data-shortcode-slide
        data-template="light"
        id="details">
        <div class="slide-intro">
            <div class="title">        
                <h2>Project details</h2>
            </div>
            <div class="details">        
                <div>
                    <h4 class="text-accent">Devices</h4>
                    <p>{{ .Params.devices }}</p>
                </div>

                <div>
                    <h4 class="text-accent">Environment / OS</h4>
                    <p>{{ .Params.environments }}</p>
                </div>
            </div>
            <div class="details">
                <div>
                    <h4 class="text-accent">Focus Areas</h4>
                    <ul class="focus">
                        {{ range $key, $val := .Params.focus_areas }}
                        <li><div class="focus focus-{{ $key }}">{{ $val }}</div></li>
                        {{ end }}
                    </ul>
                </div>
                <div>
                    <h4 class="text-accent">Goal</h4>
                    <p>{{ .Params.goals }}</p>
                    <a href="https://www.nngroup.com/articles/ten-usability-heuristics/">
                        NNG framework
                    </a>
                </div>
            </div>
        </div>
    </section>

    <section data-noprocess data-shortcode-slide
        data-template="light"
        id="heuristics">
        <div class="slide-intro">
            <div class="title">        
                <h2>UX Heuristics</h2>
            </div>
            <div class="heuristics">
                <ul>
                    {{ range $key, $val := .Site.Data.heuristics }}
                    <li>
                        <a href="#heuristic-{{ $key }}">{{ $key }}. {{ $val.name }}</a>
                    </li>
                    {{ end }}
                </ul>
            </div>
        </div>
    </section>

    <section data-noprocess data-shortcode-slide
        data-template="light"
        id="severity">
        <div class="slide-intro">
            <div class="title">
                <h2>Severity Ratings (Score)</h2>
            </div>
            {{ range .Site.Data.severity }}
            <div class="severities">
                <div class="score">
                    <div class="severity score-{{ .score }}">
                        {{ .score }}
                    </div>
                </div>
                <div class="explain">
                    <div>
                        <strong>{{ .label }}.</strong> {{ .explain }}
                    </div>
                </div>
            </div>
            {{ end }}
        </div>
    </section>

    {{ $pageResources := .Resources.ByType "page" }}
    <section data-shortcode-slide
        data-template="light"
        id="findings">
        <div class="slide-intro">
            <div class="title">
                <h3>Findings</h3>
            </div>
            <h4>
                {{ .Params.findings }}
            </h4>
            <strong class="text-accent">
                Average Scoring
            </strong>
            {{ range site.Data.heuristics }}
            {{ $id := .id }}
            {{ $name := .name }}
            {{ $audit := where $pageResources ".Params.heuristic" $id }}
            {{ if $audit }}
            <div class="scoring">
                {{ $scratch := newScratch }}
                {{ $scratch.Set $id (int 0) }}
                {{ range $page := $audit }}
                    {{ $scratch.Add $id (int .Params.Score) }}
                {{ end }}
                {{ $tally := div ($scratch.Get $id) ($audit | len) }}
                <div class="heuristic tally-{{ $tally }}">{{ $id }} {{ $name }}</div>
                <div class="tally tally-{{ $tally }}">{{ $tally }}</div>
            </div>
            {{ end }}{{ end }}
        </div>
    </section>

    {{ range site.Data.heuristics }}
    {{ $audit := where $pageResources ".Params.heuristic" .id }}
    {{ if $audit }}
    <section data-template="dark" id="heuristic-{{ .id }}">
        <div class="slide-heuristic">
            <div>
                <h2>{{ .id }}. {{ .name }}</h2>
            </div>
            <div>
                <p>{{ .description }}</p>
            </div>
        </div>
    </section>

    <!-- Audit files (issues) -->
    {{ range $page := $audit }} 
    <section>
        {{ partial "slide-audit" $page }}
    </section>
    {{ end }}{{ end }}{{ end }}

    <section data-shortcode-slide data-template="dark" id="end">
        <h2>End of UX Heuristics</h2>
        <h2>Evaluation Report</h2>
        <h3>Blah blah shit</h3>

        {{ .Params.author }}
        <a href="{{ .Params.author_url}}">{{ .Params.author_url }}</a>
        {{ .Params.author_contact }}

        <a href="#start">↩️  Start over</a>
    </section>

    <section id="debug">
        <section id="debug-overview">
            <h3>Debug</h3>
            <ul>
                <li><a href="#scratch">#scratch</a></li>
                <li><a href="#variables">#variables</a></li>
                <li><a href="#resources">#resources</a></li>
                <li><a href="#fragments">#fragments</a></li>
            </ul>
        </section>
        <section id="scratch">
            <h3>Scratch</h3>

            {{ .Resources.ByType "page" }}
    
        </section>
        <section id="variables">
            <h3>Variables</h3>
            <p>
                <strong>Page Variables</strong><br>
                AlternativeOutputFormats: {{ .AlternativeOutputFormats }}<br>
                Ancestors: {{ .Page.Ancestors }}<br>
                BundleType: {{ .Page.BundleType }}<br>
                File: {{ .Page.File }}<br>
                Fragments: {{ .Page.Fragments }}<br>
                IsHome: {{ .IsHome }}<br>
                Path: {{ .Page.Path }}<br>
                Type: {{ .Type }}
            </p>
            <p>
                <strong>Page Collections</strong><br>
                Pages: {{ .Pages }}<br>
                RegularPages: {{ .RegularPages }}<br>
                RegularPagesRecursive: {{ .RegularPagesRecursive }}
            </p>
            <p>
                <strong>Section</strong><br>
                CurrentSection: {{ .CurrentSection }}<br>
                FirstSection: {{ .FirstSection }}<br>
                Parent: {{ .Parent }}<br>
                Section: {{ .Section }}<br>
                Sections: {{ .Sections }}<br>
            </p>
        </section>
        <section id="resources">
            <h3>Resources</h3>
            {{ .Resources.ByType "page" }}
        </section>
        <section id="fragments">
            <h3>Fragments</h3>
            {{ .Page.Fragments }}
        </section>
    </section>

{{ end }}
