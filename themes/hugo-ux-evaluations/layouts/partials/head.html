<meta charset="utf-8">
<title>{{ or .Page.Title .Site.Title }}</title>
{{ with $.Param "description" }}<meta name="description" content="{{ . }}">{{ end }}
{{ with .Site.Author.name }}<meta name="author" content="{{ . }}">{{ end }}
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<!-- Theme & CSS -->
{{- $highlight_location := $.Param "reveal_hugo.highlight_cdn" | default "highlight-js" -}}
<link rel="stylesheet" href="{{ printf "/css/reset.css" | relURL }}">
<link rel="stylesheet" href="{{ printf "/css/reveal.css" | relURL }}">
<link rel="stylesheet" href="{{ printf "/css/fonts.css" | relURL }}">
<link rel="stylesheet" href="{{ printf "/css/style.css" | relURL }}" data-type="dist-theme" id="them">
<link rel="stylesheet" href="{{ printf "/css/ux-evaluation.css" | relURL }}">

{{ if $.Param "reveal_hugo.load_default_plugins" | default true -}}
  <!-- Theme used for syntax highlighting of code -->
  {{- $highlight_theme := $.Param "reveal_hugo.highlight_theme" | default "default" -}}
  <link rel="stylesheet" href="{{ printf "%s/%s.min.css" $highlight_location $highlight_theme | relURL }}">
{{- end }}
{{- $custom_css := $.Param "reveal_hugo.custom_css" -}}
{{- if $custom_css -}}
<link rel="stylesheet" href="{{ $custom_css | relURL }}" id="custom_css">
{{- end -}}

<!-- Slide background colors -->
{{- $scratch := .Scratch -}}
{{- $params := site.Params.templates -}}
{{- $noPrefix := slice "id" "class" -}}
{{- $noOutput := slice "content" "template" -}}
{{- $template := $params.Get "template" -}}

{{- if $template -}}
  {{- $scratch.Add "templateParams" slice -}}

  {{- with $.Site.Params.templates -}}
    {{- $scratch.Add "templateParams" . -}}
  {{- end -}}

  {{- if ne $.Page.File.LogicalName "_index.md" -}}
    {{- $scratch.Add "templateParams" ($.Site.GetPage $.Page.Section).Params.templates -}}
  {{- end -}}

  {{- with $.Page.Params.templates -}}
    {{- $scratch.Add "templateParams" . -}}
  {{- end -}}

  {{- $scratch.Add "templateParams" (slice $.Page.Params.templates) -}}
  {{- $templateParams := $scratch.Get "templateParams" }}

  {{- range $templateParams -}}
    {{- if (ne . nil) -}}
      {{- range $key, $value := (index . $template) -}}
        {{- $scratch.SetInMap "template-" $key $value -}}
      {{- end -}}
    {{- end -}}
  {{- end -}}

  <style>
    .template- {
    {{- range $key, $value := ($scratch.Get "template") }}
      {{- $attrName := cond (in $noPrefix $key) $key (delimit (slice "data" $key) "-") }}
      {{ $attrName }}: {{ $value }}; 
    {{- end }}
    }
    {{ $template }}
  </style>

{{- else -}}
<link rel="testing" src="/css/testing.css">
{{- end -}}
